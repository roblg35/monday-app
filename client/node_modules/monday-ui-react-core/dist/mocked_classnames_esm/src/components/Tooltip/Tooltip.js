import{inherits as o,createSuper as e,createClass as t,classCallCheck as i,assertThisInitialized as n}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as s}from"react/jsx-runtime";import r from"classnames";import{PureComponent as a,isValidElement as l}from"react";import{isFunction as p}from"lodash-es";import d from"../Dialog/Dialog.js";import{DialogPosition as h}from"../../constants/positions.js";import{TooltipTheme as g,TooltipArrowPosition as T}from"./TooltipConstants.js";import"./Tooltip.scss.js";import{HideShowEvent as c,AnimationType as m,JustifyType as u}from"../../constants/dialog.js";var y={lastTooltipHideTS:null,openTooltipsCount:0},w=function(h){o(T,a);var g=e(T);function T(o){var e;return i(this,T),(e=g.call(this,o)).renderTooltipContent=e.renderTooltipContent.bind(n(e)),e.getShowDelay=e.getShowDelay.bind(n(e)),e.onTooltipShow=e.onTooltipShow.bind(n(e)),e.onTooltipHide=e.onTooltipHide.bind(n(e)),e.wasShown=!1,e}return t(T,[{key:"getContainer",value:function(){return document.getElementById("tooltips-container")||document.querySelector("body")}},{key:"renderTooltipContent",value:function(){var o,e=this.props,t=e.theme,i=e.content,n=e.paddingSize,a=e.className,d=e.style;return i?(p(i)?o=i():(l(i)||"string"==typeof i&&i)&&(o=i),o?s("div",Object.assign({style:d,className:r("monday-style-tooltip monday-style-tooltip-".concat(t," padding-size-").concat(n),a)},{children:o})):null):null}},{key:"onTooltipShow",value:function(){if(!this.wasShown){var o=this.props.onTooltipShow;y.openTooltipsCount++,this.wasShown=!0,o&&o()}}},{key:"onTooltipHide",value:function(){if(this.wasShown){var o=this.props.onTooltipHide;y.lastTooltipHideTS=Date.now(),y.openTooltipsCount--,this.wasShown=!1,o&&o()}}},{key:"getTimeSinceLastTooltip",value:function(){return y.openTooltipsCount>0?0:y.lastTooltipHideTS?Date.now()-y.lastTooltipHideTS:1/0}},{key:"getShowDelay",value:function(){var o=this.props,e=o.showDelay,t=o.immediateShowDelay,i=this.getTimeSinceLastTooltip();return(0===t||t)&&1500>i?{showDelay:t,preventAnimation:!0}:{showDelay:e,preventAnimation:!1}}},{key:"render",value:function(){var o=this.props,e=o.moveBy,t=o.justify,i=o.children,n=o.getContainer,a=o.theme,l=o.paddingSize,p=o.tip,h=o.showTrigger,g=o.hideTrigger,T=o.showOnDialogEnter,c=o.addKeyboardHideShowTriggersByDefault,u=o.open,y=o.arrowClassName;if(!i)return null;if(o.withoutDialog)return this.renderTooltipContent();var w=this.renderTooltipContent,S=Object.assign(Object.assign({},this.props),{open:u,startingEdge:t,tooltip:p,content:w,getContainer:n||this.getContainer,moveBy:e,tooltipClassName:r("monday-style-arrow","monday-style-arrow-".concat(a),"padding-size-".concat(l),y),animationType:m.EXPAND,onDialogDidHide:this.onTooltipHide,onDialogDidShow:this.onTooltipShow,getDynamicShowDelay:this.getShowDelay,showTrigger:h,hideTrigger:g,showOnDialogEnter:T,addKeyboardHideShowTriggersByDefault:c});return s(d,Object.assign({},S,{children:i}))}}]),T}();w.positions=h,w.hideShowTriggers=c,w.themes=g,w.animationTypes=m,w.justifyTypes=u,w.arrowPositions=T,w.defaultProps={arrowPosition:T.CENTER,moveBy:{main:4,secondary:0},theme:g.Dark,position:w.positions.TOP,justify:w.justifyTypes.CENTER,hideDelay:0,showDelay:300,disableDialogSlide:!0,animationType:m.EXPAND,withoutDialog:!1,containerSelector:"#tooltips-container",tip:!0,hideWhenReferenceHidden:!1,modifiers:[],showTrigger:w.hideShowTriggers.MOUSE_ENTER,hideTrigger:w.hideShowTriggers.MOUSE_LEAVE,showOnDialogEnter:!1,referenceWrapperClassName:"",addKeyboardHideShowTriggersByDefault:!1,open:!1};export{w as default};
