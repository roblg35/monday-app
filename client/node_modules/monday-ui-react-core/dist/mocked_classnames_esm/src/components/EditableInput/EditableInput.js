import{slicedToArray as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as e}from"react/jsx-runtime";import{forwardRef as n,useState as r,useRef as t,useCallback as i,useLayoutEffect as a,useEffect as u}from"react";import s from"classnames";import l from"autosize";import c from"../../hooks/useStyle.js";import d from"../../hooks/useMergeRefs.js";import{isTabEvent as m,isEnterEvent as f,isEscapeEvent as v,isArrowUpEvent as p,isArrowDownEvent as E,isArrowLeftEvent as b,isArrowRightEvent as g}from"../../utils/dom-event-utils.js";import{InputType as T}from"./EditableInputConstants.js";import"./EditableInput.scss.js";var A=n((function(n,A){var h=n.className,C=n.inputType,y=void 0===C?T.INPUT:C,j=n.autoSize,x=void 0!==j&&j,w=n.id,I=n.tabIndex,_=n.autoComplete,B=void 0===_||_,F=n.disabled,K=void 0!==F&&F,R=n.maxLength,k=n.placeholder,D=void 0===k?"":k,L=n.onClick,P=n.onKeyPress,S=n.shouldFocusOnMount,X=void 0===S||S,z=n.selectOnMount,M=n.value,N=n.customColor,O=n.ignoreBlurClass,H=n.onFinishEditing,V=n.onIgnoreBlurEvent,q=n.onFocus,U=n.onBlur,G=n.isValidValue,J=n.onChange,Q=n.onError,W=n.onSuccess,Y=n.onKeyDown,Z=n.onTabHandler,$=n.onCancelEditing,oo=n.textareaSubmitOnEnter,eo=void 0!==oo&&oo,no=n.onArrowKeyDown,ro=n.ariaLabel,to=r(M||""),io=o(to,2),ao=io[0],uo=io[1],so=t(null),lo=d({refs:[A,so]}),co=i((function(){so.current&&x&&y===T.TEXT_AREA&&l(so.current)}),[so,x,y]),mo=i((function(){so.current&&requestAnimationFrame((function(){var o;null===(o=so.current)||void 0===o||o.focus()}))}),[so]),fo=i((function(o){q&&q(o)}),[q]),vo=i((function(o){if(n=O,(e=o.relatedTarget)&&n&&e.classList.contains(n))V(ao);else{var e,n,r=o;r.origin="blur",H&&H(ao,r),U&&U(r)}}),[O,ao,H,U,V]),po=i((function(o){var e=o.target.value;!G||G(e)?(uo(e),J&&J(e),W&&W()):Q&&Q()}),[G,J,Q,W]),Eo=i((function(){so.current&&so.current.select()}),[so]),bo=i((function(){so.current&&(so.current.value="",so.current.value=ao)}),[so,ao]),go=i((function(o){return Y?Y(o,ao):Z&&m(o)&&y!==T.TEXT_AREA?(o.preventDefault(),Z(ao,o)):(H&&f(o)&&(y!==T.TEXT_AREA||eo)&&H(ao,o),$&&v(o)&&$(o),void(no&&(p(o)||E(o)||b(o)||g(o))&&no(ao,o)))}),[Y,y,ao,Z,eo,H,$,no]);a((function(){X&&mo(),co(),z?Eo():bo()}),[]),u((function(){uo(M)}),[M]);var To=c(void 0,{color:N}),Ao=y===T.TEXT_AREA&&x?1:void 0;return e(y,{ref:lo,id:w,style:To,className:s("editable-input--wrapper",h,{"no-resize":x}),onChange:po,onKeyDown:go,onBlur:vo,onFocus:fo,onClick:L,onKeyPress:P,value:ao,placeholder:D,dir:"auto",tabIndex:I,autoComplete:B?"on":"off",rows:Ao,maxLength:R,"aria-label":ro,disabled:K})}));export{A as default};
