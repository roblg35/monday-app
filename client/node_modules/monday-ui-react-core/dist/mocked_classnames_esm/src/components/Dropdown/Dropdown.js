import{objectSpread2 as e,slicedToArray as n,defineProperty as o,extends as t,toConsumableArray as r}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{SIZES as a}from"../../constants/sizes.js";import i,{forwardRef as s,useRef as l,useMemo as u,useState as c,useCallback as p}from"react";import d,{components as m}from"react-select";import f from"react-select/async";import{noop as C}from"lodash-es";import{WindowedMenuList as O}from"react-windowed-select";import"prop-types";import v from"classnames";import M from"./components/menu/menu.js";import g from"./components/DropdownIndicator/DropdownIndicator.js";import h from"./components/option/option.js";import w from"./components/singleValue/singleValue.js";import y from"./components/ClearIndicator/ClearIndicator.js";import b from"./components/MultiValueContainer/MultiValueContainer.js";import{ADD_AUTO_HEIGHT_COMPONENTS as D,defaultCustomStyles as I,DROPDOWN_ID as S}from"./DropdownConstants.js";import j,{customTheme as R}from"./Dropdown.styles.js";import V from"./components/Control/Control.js";import{MENU_WRAPPER_CLASS_NAME as W,DROPDOWN_CHIP_COLORS as N}from"./dropdown-constants.js";import"./Dropdown.scss.js";var E=s((function(a,s){var I=a.className,S=a.optionWrapperClassName,N=a.singleValueWrapperClassName,E=a.dropdownMenuWrapperClassName,x=a.placeholder,z=a.disabled,P=a.readOnly,A=a.onMenuOpen,F=a.onMenuClose,L=a.onFocus,T=a.onBlur,B=a.onChange,k=a.searchable,H=a.options,K=a.defaultValue,_=a.value,U=a.noOptionsMessage,q=a.openMenuOnFocus,G=a.openMenuOnClick,J=a.clearable,Q=a.OptionRenderer,X=a.optionRenderer,Y=a.ValueRenderer,Z=a.valueRenderer,$=a.menuRenderer,ee=a.menuPlacement,ne=a.rtl,oe=a.size,te=a.asyncOptions,re=a.cacheOptions,ae=a.defaultOptions,ie=a.isVirtualized,se=a.menuPortalTarget,le=a.extraStyles,ue=a.maxMenuHeight,ce=a.menuIsOpen,pe=a.tabIndex,de=a.id,me=a.autoFocus,fe=a.multi,Ce=void 0!==fe&&fe,Oe=a.multiline,ve=void 0!==Oe&&Oe,Me=a.onOptionRemove,ge=a.onOptionSelect,he=a.onClear,we=a.onInputChange,ye=a.closeMenuOnSelect,be=void 0===ye?!Ce:ye,De=a.withMandatoryDefaultOptions,Ie=a.isOptionSelected,Se=a.insideOverflowContainer,je=a.insideOverflowWithTransformContainer,Re=a.tooltipContent,Ve=a.onKeyDown,We=a.isLoading,Ne=a.loadingMessage,Ee=a.ariaLabel,xe=l(),ze=u((function(){return K?Array.isArray(K)?K.map((function(n){return e(e({},n),{},{isMandatory:!0})})):e(e({},K),{},{isMandatory:!0}):K}),[K]),Pe=c(ze||[]),Ae=n(Pe,2),Fe=Ae[0],Le=Ae[1],Te=c(!1),Be=n(Te,2),ke=Be[0],He=Be[1],Ke=X||Q,_e=Z||Y,Ue=!!_,qe=null!=_?_:Fe,Ge=u((function(){return Array.isArray(qe)?qe.reduce((function(n,t){return e(e({},n),{},o({},t.value,t))}),{}):{}}),[qe]),Je=u((function(){return Ee||"".concat(P?"Readonly ":""," ").concat(Re," ").concat(Array.isArray(qe)?"Selected: ".concat(qe.map((function(e){return e.label})).join(", ")):"Select")}),[Ee,P,qe,Re]),Qe=Ce?qe:_,Xe=u((function(){var t=j({size:oe,rtl:ne,insideOverflowContainer:Se,controlRef:xe,insideOverflowWithTransformContainer:je}),r=le(t),a=Object.entries(r).reduce((function(r,a){var i=n(a,2),s=i[0],l=i[1];return e(e({},r),{},o({},s,(function(e,n){var o=t[s]?t[s](e,n):e;return l(o,n)})))}),{});if(Ce){ve&&D.forEach((function(n){var o=a[n];a[n]=function(n,t){return e(e({},o(n,t)),{},{height:"auto"})}}));var i=a.valueContainer;a.valueContainer=function(n,o){return e(e({},i(n,o)),{},{paddingLeft:6})}}return a}),[oe,ne,Se,je,le,Ce,ve]),Ye=p((function(e){return i.createElement(M,t({},e,{Renderer:$,dropdownMenuWrapperClassName:E}))}),[E,$]),Ze=p((function(e){return i.createElement(g,t({},e,{size:oe}))}),[oe]),$e=p((function(e){return i.createElement(h,t({},e,{Renderer:Ke,optionWrapperClassName:S}))}),[Ke,S]),en=p((function(e){return i.createElement(m.Input,t({},e,{"aria-label":"Dropdown input"}))}),[]),nn=p((function(e){return i.createElement(w,t({},e,{readOnly:P,Renderer:_e,selectedOption:qe[0],singleValueWrapperClassName:N}))}),[_e,P,qe,N]),on=p((function(e){return i.createElement(y,t({},e,{size:oe}))}),[oe]),tn=u((function(){return function(e,n){Me&&Me(Ge[e]);var o=Fe.filter((function(n){return n.value!==e}));B&&B(o,n),Le(o)}}),[B,Me,Fe,Ge]),rn=u((function(){return{selectedOptions:qe,onSelectedDelete:tn,setIsDialogShown:He,isDialogShown:ke,isMultiline:ve,insideOverflowContainer:Se,insideOverflowWithTransformContainer:je,controlRef:xe,tooltipContent:Re}}),[qe,tn,ke,ve,Se,je,Re]),an=te?f:d,sn=e({},te&&e({loadOptions:te,cacheOptions:re},ae&&{defaultOptions:ae})),ln=e(e({},!te&&{options:H}),Ce&&{isMulti:!0}),un=p((function(e){var n,o=e.target;return(null==o||null===(n=o.parentElement)||void 0===n||!n.classList.contains(W))&&(Se||je)}),[Se,je]);return i.createElement(an,t({className:v("dropdown-wrapper",I),selectProps:rn,components:e(e({DropdownIndicator:Ze,Menu:Ye,ClearIndicator:on,Input:en,Option:$e,Control:V,SingleValue:nn},Ce&&{MultiValue:C,ValueContainer:b}),ie&&{MenuList:O}),closeMenuOnScroll:un,size:oe,noOptionsMessage:U,placeholder:x,isDisabled:z,isClearable:!P&&J,isSearchable:!P&&k,readOnly:P,"aria-readonly":P,"aria-label":Je,"aria-details":Re,defaultValue:K,value:Qe,onMenuOpen:A,onMenuClose:F,onFocus:L,onBlur:T,onChange:function(e,n){switch(B&&B(e,n),n.action){case"select-option":var o=Ce?n.option:e;ge&&ge(o),Ue||Le([].concat(r(Fe),[o]));break;case"clear":he&&he(),Ue||Le(De?ze:[])}},onKeyDown:Ve,onInputChange:we,openMenuOnFocus:q,openMenuOnClick:G,isRtl:ne,styles:Xe,theme:R,maxMenuHeight:ue,menuPortalTarget:se,menuPlacement:ee,menuIsOpen:!P&&ce,tabIndex:pe,id:de,autoFocus:me,closeMenuOnSelect:be,ref:s,withMandatoryDefaultOptions:De,isOptionSelected:Ie,isLoading:We,loadingMessage:Ne},sn,ln))}));E.size=a,E.chipColors=N,E.defaultProps={className:"",optionWrapperClassName:void 0,dropdownMenuWrapperClassName:void 0,singleValueWrapperClassName:void 0,placeholder:"",onMenuOpen:C,onMenuClose:C,onKeyDown:C,onFocus:C,onBlur:C,onChange:C,onInputChange:C,searchable:!0,options:[],menuPlacement:"bottom",noOptionsMessage:C,clearable:!0,size:a.MEDIUM,extraStyles:I,tabIndex:"0",onOptionRemove:void 0,id:S,autoFocus:!1,closeMenuOnSelect:void 0,ref:void 0,withMandatoryDefaultOptions:!1,insideOverflowContainer:!1,insideOverflowWithTransformContainer:!1,tooltipContent:"",disabled:!1,readOnly:!1,isLoading:!1,loadingMessage:void 0,ariaLabel:void 0};var x=E;export{x as default};
