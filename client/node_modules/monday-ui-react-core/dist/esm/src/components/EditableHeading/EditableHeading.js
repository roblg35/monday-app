import{slicedToArray as e}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as o}from"react/jsx-runtime";import{useState as n,useRef as i,useCallback as t,useEffect as s,useLayoutEffect as a}from"react";import l from"classnames";import r from"../Heading/Heading.js";import u from"../Clickable/Clickable.js";import d from"../EditableInput/EditableInput.js";import c from"../../hooks/usePrevious/index.js";import{InputType as p}from"../EditableInput/EditableInputConstants.js";import"./EditableHeading.scss.js";import{HeadingSizes as m,HeadingTypes as g}from"../Heading/HeadingConstants.js";import{getTestId as v,ComponentDefaultTestId as f}from"../../tests/testIds.js";var b=function(g){var b=g.id,h=void 0===b?"":b,E=g.className,C=g.inputClassName,y=void 0===C?"":C,T=g.dataTestId,j=void 0===T?"":T,O=g["data-testid"],x=void 0===O?"":O,H=g.value,I=g.editing,A=g.disabled,L=g.onFinishEditing,B=g.onCancelEditing,M=g.onIgnoreBlurEvent,w=g.errorClassTimeout,F=void 0===w?2e3:w,N=g.style,P=g.customColor,k=g.onStartEditing,z=g.contentRenderer,D=g.tooltip,K=g.autoSize,S=void 0===K||K,V=g.highlightTerm,_=void 0===V?null:V,R=g.insetFocus,G=void 0!==R&&R,X=g.size,q=void 0===X?m.LARGE:X,J=g.displayPlaceholderInTextMode,Q=void 0===J||J,U=g.suggestEditOnHover,W=void 0===U||U,Y=g.type,Z=void 0===Y?r.types.h1:Y,$=n(I&&!A),ee=e($,2),oe=ee[0],ne=ee[1],ie=n(!1),te=e(ie,2),se=te[0],ae=te[1],le=n(H||""),re=e(le,2),ue=re[0],de=re[1],ce=c(H),pe=i(null),me=t((function(e){A||oe||(ne(!0),k&&k(e))}),[oe,A,ne,k]),ge=t((function(e,o){ne(!1),de(e),null==L||L(e,o)}),[L,ne,de]),ve=t((function(e){ne(!1),null==B||B(e)}),[B,ne]),fe=t((function(e){null==M||M(e)}),[M]),be=t((function(){ae(!1)}),[ae]),he=t((function(){ae(!0)}),[ae]),Ee=t((function(){be()}),[be]);s((function(){I||H===ce||H===ue||de(H)}),[I,H,ce,ue,de]),s((function(){ne(I)}),[I]),a((function(){I||ue||!H||de(H)}),[I,H,ce,ue,de]),s((function(){var e;return se&&(e=setTimeout(be,F)),function(){return e&&clearTimeout(e)}}),[se,ae,be,F]);var Ce,ye,Te,je=!A&&oe;return o("div",Object.assign({ref:pe,style:N,className:l("editable-heading--wrapper",E,{"inset-focus":G}),"aria-label":"".concat(H," ").concat(D||""),id:h,"data-testid":j||x||v(f.EDITABLE_HEADING,h)},{children:o(u,Object.assign({role:je?"button":"input",onClick:me,disabled:A},{children:je?(ye=g.inputType||(g.ellipsisMaxLines>1?p.TEXT_AREA:void 0),Te={value:ue,className:l("editable-heading-input","element-type-".concat(Z),"size-".concat(q),y),isValidValue:g.isValidValue,onChange:g.onChange,onKeyDown:g.onKeyDown,onKeyPress:g.onKeyPress,onClick:g.onClick,customColor:P,onTabHandler:g.onTabHandler,onArrowKeyDown:g.onArrowKeyDown,autoComplete:g.autoComplete,maxLength:g.maxLength,placeholder:g.placeholder,shouldFocusOnMount:g.shouldFocusOnMount,selectOnMount:g.selectOnMount,onBlur:g.onBlur,onFocus:g.onFocus,inputType:ye,ignoreBlurClass:g.ignoreBlurClass,autoSize:S,textareaSubmitOnEnter:g.textareaSubmitOnEnter,onFinishEditing:ge,onCancelEditing:ve,onIgnoreBlurEvent:fe,onError:he,onSuccess:Ee,ariaLabel:g.inputAriaLabel},o(d,Object.assign({},Te))):(Ce={value:Q?ue||g.placeholder||"":ue,type:Z,customColor:P,suggestEditOnHover:W&&!A,tooltipPosition:g.tooltipPosition,ellipsisMaxLines:g.ellipsisMaxLines,nonEllipsisTooltip:g.tooltip,size:q,className:g.headingClassName,highlightTerm:_},z?z(Ce):o(r,Object.assign({},Ce)))}))}))};Object.assign(b,{types:g,sizes:m});var h=b;export{h as default};
