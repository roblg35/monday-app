import{jsx as i}from"react/jsx-runtime";import{forwardRef as e,useRef as t,useMemo as r,useLayoutEffect as o}from"react";import s from"classnames";import n from"../Tooltip/Tooltip.js";import l from"../../hooks/useIsOverflowing/useIsOverflowing.js";import a from"../../hooks/useMergeRefs.js";import"./TextWithHighlight.scss.js";var p=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"em",n=arguments.length>4?arguments[4]:void 0,l=o;return r?i(l,Object.assign({className:s("highlight-text",n)},{children:e}),t):i("span",{children:e},t)},m=e((function(e,m){var h=e.className,c=e.id,g=e.text,f=void 0===g?"":g,u=e.highlightTerm,v=e.limit,d=e.useEllipsis,j=void 0===d||d,T=e.linesToClamp,w=void 0===T?3:T,x=e.ignoreCase,O=void 0===x||x,E=e.allowTermSplit,N=void 0===E||E,b=e.nonEllipsisTooltip,C=e.tooltipPosition,k=e.wrappingTextTag,y=void 0===k?"em":k,I=e.wrappingElementClassName,P=t(null),R=a({refs:[m,P]}),H=r((function(){if(!f||!u||0===v)return f;var i=u;N&&(i=u.split(" ").join("|"));for(var e=f.split(RegExp("(".concat(i,")"),O?"i":"")),t=[],r=0,o=0,s=0;e.length>s;s++)if(e[s]){var n=s%2==1;t.push(p(e[s],o++,n&&(!v||0>v||v>r),y,I)),n&&r++}return t}),[f,u,v,O,N,y,I]),M=l({ref:j&&P});o((function(){P.current&&P.current.style.setProperty("--heading-clamp-lines",w)}),[P,w]);var S=i("div",Object.assign({ref:R,className:s("text-with-highlight--wrapper",h,{"with-ellipsis":j}),id:c},{children:H}));return M||b?i(n,Object.assign({content:M?f:b,position:C},{children:S})):S}));export{m as default};
