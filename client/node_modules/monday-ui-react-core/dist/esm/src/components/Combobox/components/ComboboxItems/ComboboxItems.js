import{jsx as e}from"react/jsx-runtime";import{forwardRef as t,useRef as o,useMemo as n,useCallback as r}from"react";import i from"classnames";import{comboboxItemRenderer as s}from"../../ComboboxHelpers/ComboboxHelpers.js";import a from"../../../VirtualizedList/VirtualizedList.js";import{COMBOBOX_CATEGORY_ITEM as l,COMBOBOX_OPTION_ITEM as m}from"../ComboboxConstants.js";import c from"./ComboboxItems.module.scss.js";var p=t((function(t,p){var d=t.className,u=t.optionClassName,f=t.categories,v=t.options,I=t.optionRenderer,g=t.activeItemIndex,C=t.visualFocusItemIndex,b=t.onOptionClick,h=t.onOptionEnter,x=t.onOptionLeave,y=t.optionLineHeight,O=t.shouldScrollToSelectedItem,j=t.renderOnlyVisibleOptions,L=t.onActiveCategoryChanged,N=t.maxOptionsWithoutScroll,R=t.itemsMap,S=o(),H=n((function(){if(N)return{height:y*Math.min(v.length+Object.keys(null!=f?f:{}).length,N+.5)}}),[N,y,v,f]),V=r((function(e,t,o){return s({item:e,style:o,optionEvents:{onOptionClick:b,onOptionEnter:h,onOptionLeave:x},optionRenderData:{className:u,optionLineHeight:y,optionRenderer:I,visualFocusItemIndex:C,scrollRef:j?null:p,activeItemIndex:g,shouldScrollToSelectedItem:O},isVirtualized:j})}),[b,h,x,u,y,I,C,j,p,g,O]),k=r((function(e){var t=e.firstItemId;window.requestAnimationFrame((function(){var e=R.get(t);if(e&&(e.type===l||e.type===m)){var o=e.type===m&&e.categoryId?e.categoryId:e.id;if(o!==S.current){S.current=o;var n=R.get(S.current);L(n)}}}))}),[R,L]);return j?e(a,{ref:p,className:i(c.optionsContainer,d),items:v,itemRenderer:V,role:"treegrid",scrollableClassName:c.scrollableContainer,onItemsRendered:k,style:H}):e("div",Object.assign({className:i(c.scrollableContainer,c.optionsContainer,d),role:"treegrid",style:H,ref:p},{children:v.map((function(e,t){return V(e,t,void 0)}))}))}));export{p as ComboboxItems};
