import{slicedToArray as e,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as s,jsxs as i}from"react/jsx-runtime";import{forwardRef as r,useRef as a,useMemo as t,useCallback as l}from"react";import n from"classnames";import c from"../Icon/Icon.js";import m from"../../hooks/useMergeRefs.js";import d from"../Icon/Icons/components/CloseSmall.js";import{getCSSVar as p}from"../../services/themes.js";import{elementColorsNames as u,getElementColor as f}from"../../utils/colors-vars-map.js";import v from"../Avatar/Avatar.js";import b from"../IconButton/IconButton.js";import h from"../Tooltip/Tooltip.js";import{getTestId as j,ComponentDefaultTestId as g}from"../../tests/testIds.js";import{ChipsSize as C}from"./ChipsConstants.js";import{AvatarType as O}from"../Avatar/AvatarConstants.js";import I from"../../hooks/useHover/useHover.js";import k from"../../hooks/useSetFocus/index.js";import T from"../../hooks/useClickableProps/useClickableProps.js";import y from"../../hooks/useIsOverflowing/useIsOverflowing.js";import N from"./hooks/useChipOverflowTooltip.js";import{BEMClass as w}from"../../helpers/bem-helper.js";import"../Clickable/Clickable.scss.js";import A from"./Chips.module.scss.js";var P=w("monday-style-clickable"),S=r((function(r,w){var S,R=r.className,x=r.avatarClassName,M=r.iconClassName,z=r.id,B=r.label,H=void 0===B?"":B,F=r.leftIcon,_=void 0===F?null:F,D=r.rightIcon,L=void 0===D?null:D,X=r.leftAvatar,E=void 0===X?null:X,G=r.rightAvatar,Y=void 0===G?null:G,U=r.disabled,q=void 0!==U&&U,J=r.readOnly,K=void 0!==J&&J,Q=r.allowTextSelection,V=void 0!==Q&&Q,W=r.color,Z=void 0===W?u.PRIMARY:W,$=r.iconSize,ee=void 0===$?16:$,oe=r.onDelete,se=void 0===oe?function(e,o){}:oe,ie=r.onMouseDown,re=r.onClick,ae=r.noAnimation,te=void 0===ae||ae,le=r.ariaLabel,ne=r.disableClickableBehavior,ce=void 0!==ne&&ne,me=r.leftAvatarType,de=void 0===me?O.IMG:me,pe=r.rightAvatarType,ue=void 0===pe?O.IMG:pe,fe=r.showBorder,ve=void 0!==fe&&fe,be=r.leftRenderer,he=r.rightRenderer,je=r.dataTestId||j(g.CHIP,z),ge=!(!re&&!ie||ce),Ce=!K&&!q,Oe=le||H,Ie=a(null),ke=a(null),Te=a(null),ye=I(),Ne=e(ye,2),we=Ne[0],Ae=Ne[1],Pe=k({ref:Te}).isFocused,Se=y({ref:ke}),Re=m({refs:[w,Te,we]}),xe=n(A.chips,"chips--wrapper",R,(o(S={},A.disabled,q),o(S,A.withClose,Ce),o(S,A.noAnimation,te),o(S,A.withUserSelect,V),o(S,A.border,ve),S)),Me=n("monday-style-clickable",xe,o({disabled:q},P({state:"disable-text-selection"}),!V)),ze=N({isOverflowing:Se,wrapperClassName:xe,clickableClassName:Me,label:H}),Be=t((function(){return{backgroundColor:q?p("disabled-background-color"):ge&&(Ae||Pe)?f(Z,!0,!0):f(Z,!0)}}),[q,ge,Ae,Pe,Z]),He=l((function(e){e.stopPropagation(),se&&se(z,e)}),[z,se]),Fe=l((function(e){void 0!==re&&e.target!==Ie.current&&(e.preventDefault(),re(e))}),[re]),_e=T({onClick:Fe,onMouseDown:ie,disabled:q,id:z,dataTestId:je,ariaLabel:Oe,ariaHidden:!1,ariaHasPopup:!1,ariaExpanded:!1},Re),De=ge?Object.assign(Object.assign({},_e),{className:Me,style:Be}):Object.assign(Object.assign({className:xe},ze.wrapperProps),{"aria-label":Oe,style:Be,ref:Re,onClick:Fe,onMouseDown:ie,id:z,"data-testid":je}),Le=de===O.TEXT?{text:E}:{src:E},Xe=de===O.TEXT?{text:Y}:{src:Y};return s(h,Object.assign({},ze.tooltipProps,{children:i("div",Object.assign({},De,{children:[E?s(v,Object.assign({withoutBorder:!0,className:n(A.avatar,A.left,x),customSize:18,type:de},Le),z):null,_?s(c,{className:n(A.icon,A.left,M),iconType:c.type.ICON_FONT,clickable:!1,icon:_,iconSize:ee,ignoreFocusStyle:!0}):null,be&&s("div",Object.assign({className:n(A.customRenderer,A.left)},{children:be})),s("div",Object.assign({className:A.label,ref:ke},{children:H})),L?s(c,{className:n(A.icon,A.right,M),iconType:c.type.ICON_FONT,clickable:!1,icon:L,iconSize:ee,ignoreFocusStyle:!0}):null,Y?s(v,Object.assign({withoutBorder:!0,className:n(A.avatar,A.right,x),customSize:16,type:ue},Xe),z):null,he&&s("div",Object.assign({className:n(A.customRenderer,A.right)},{children:he})),Ce&&s(b,{size:C.XXS,color:b.colors.ON_PRIMARY_COLOR,className:n(A.icon,A.close),ariaLabel:"Remove",hideTooltip:!0,icon:d,onClick:He,dataTestId:"".concat(je,"-close"),ref:Ie})]}))}))}));Object.assign(S,{sizes:C,defaultTestId:g.CHIP,colors:u,avatarTypes:O});var R=S;export{R as default};
