import{slicedToArray as i,toConsumableArray as o}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as n}from"react/jsx-runtime";import r from"classnames";import e,{forwardRef as a,useRef as t,useState as c,useMemo as s,useCallback as l}from"react";import d from"../../../hooks/useMergeRefs.js";import"./Accordion.scss.js";var u=a((function(a,u){var m=a.children,f=void 0===m?null:m,p=a.allowMultiple,v=void 0!==p&&p,j=a["data-testid"],b=void 0===j?"monday-accordion":j,g=a.defaultIndex,h=void 0===g?[]:g,y=a.className,A=void 0===y?"":y,C=a.id,O=t(null),x=d({refs:[u,O]}),k=c(h),M=i(k,2),N=M[0],_=M[1],w=s((function(){return e.Children.toArray(f)}),[f]),B=l((function(i){return N.includes(i)}),[N]),E=l((function(i){if(v){var n=o(N);if(B(i)){var r=n.indexOf(i);r>-1&&n.splice(r,1)}else n.push(i);_(n)}else B(i)?_([]):_([i])}),[B,N,v]),H=s((function(){return e.Children.map(w,(function(i,o){var n,r,a,t=Object.assign({},null==i?void 0:i.props),c=(n=o,a=C,(r=t).id?r.id:a?"".concat(a,"--item-").concat(n):"".concat("monday-accordion","--item-").concat(n));return e.cloneElement(i,Object.assign(Object.assign({},t),{id:c,onClickAccordionCallback:function(){E(o)},open:B(o)}))}))}),[w,C,B,E]);return n("div",Object.assign({ref:x,className:r("accordion",A),"data-testid":b,id:C},{children:w&&H}))}));export{u as default};
