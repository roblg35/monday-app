import{jsx as e,jsxs as n}from"react/jsx-runtime";import{forwardRef as o,useRef as i,useMemo as t,useCallback as a,useEffect as s}from"react";import c from"classnames";import r from"../../hooks/useDebounceEvent/index.js";import l from"../Icon/Icon.js";import d from"../Loader/Loader.js";import u from"../FieldLabel/FieldLabel.js";import{TextFieldTextType as p,FEEDBACK_CLASSES as m,SIZE_MAPPER as v,getActualSize as _,TextFieldAriaLabel as b,TextFieldFeedbackState as f}from"./TextFieldConstants.js";import{BASE_SIZES as h}from"../../constants/sizes.js";import N from"../../hooks/useMergeRefs.js";import g from"../Clickable/Clickable.js";import{getTestId as j}from"../../tests/testIds.js";import{NOOP as T}from"../../utils/function-utils.js";import{ComponentDefaultTestId as x}from"../../tests/constants.js";import"./TextField.scss.js";var y={primary:"",secondary:"",layout:""},I=o((function(o,f){var h=o.className,C=void 0===h?"":h,L=o.placeholder,O=void 0===L?"":L,F=o.autoComplete,k=void 0===F?"off":F,E=o.value,A=o.onChange,D=void 0===A?T:A,S=o.onBlur,z=void 0===S?T:S,w=o.onFocus,R=void 0===w?T:w,X=o.onKeyDown,M=void 0===X?T:X,V=o.onWheel,q=void 0===V?T:V,B=o.debounceRate,K=void 0===B?0:B,W=o.autoFocus,H=void 0!==W&&W,U=o.disabled,Y=void 0!==U&&U,G=o.readonly,J=void 0!==G&&G,P=o.setRef,Q=void 0===P?T:P,Z=o.iconName,$=o.secondaryIconName,ee=o.id,ne=void 0===ee?"input":ee,oe=o.title,ie=void 0===oe?"":oe,te=o.size,ae=void 0===te?I.sizes.SMALL:te,se=o.validation,ce=void 0===se?null:se,re=o.wrapperClassName,le=void 0===re?"":re,de=o.onIconClick,ue=void 0===de?T:de,pe=o.clearOnIconClick,me=void 0!==pe&&pe,ve=o.labelIconName,_e=o.showCharCount,be=void 0!==_e&&_e,fe=o.inputAriaLabel,he=o.searchResultsContainerId,Ne=void 0===he?"":he,ge=o.activeDescendant,je=void 0===ge?"":ge,Te=o.iconsNames,xe=void 0===Te?y:Te,ye=o.type,Ie=void 0===ye?p.TEXT:ye,Ce=o.maxLength,Le=void 0===Ce?null:Ce,Oe=o.trim,Fe=void 0!==Oe&&Oe,ke=o.role,Ee=void 0===ke?"":ke,Ae=o.required,De=void 0!==Ae&&Ae,Se=o.loading,ze=void 0!==Se&&Se,we=o.dataTestId,Re=o.secondaryDataTestId,Xe=o.tabIndex,Me=o.name,Ve=i(null),qe=r({delay:K,onChange:D,initialStateValue:E,trim:Fe}),Be=qe.inputValue,Ke=qe.onEventChanged,We=qe.clearValue,He=t((function(){return $&&Be?$:Z}),[Z,$,Be]),Ue=a((function(){Y||(me&&(Ve.current&&Ve.current.focus(),We()),ue(He))}),[We,He,Ve,me,Y,ue]),Ye=t((function(){return ce&&ce.status?m[ce.status]:""}),[ce]),Ge=Z||$,Je=be||ce&&ce.text,Pe=$===He,Qe=Z===He,Ze=$&&Pe&&!!Be,$e=N({refs:[f,Ve,Q]});return s((function(){if(Ve.current&&H){var e=requestAnimationFrame((function(){return Ve.current.focus()}));return function(){return cancelAnimationFrame(e)}}}),[Ve,H]),e("div",Object.assign({className:c("input-component",le,{"input-component--disabled":Y}),role:Ee,"aria-busy":ze},{children:n("div",Object.assign({className:"input-component__label--wrapper"},{children:[e(u,{labelText:ie,icon:ve,iconLabel:xe.layout,labelFor:ne}),n("div",Object.assign({className:c("input-component__input-wrapper",v[_(ae)],Ye)},{children:[e("input",{className:c(C,"input-component__input",{"input-component__input--has-icon":!!Ge}),placeholder:O,autoComplete:k,value:Be,onChange:Ke,disabled:Y,readOnly:J,ref:$e,type:Ie,id:ne,name:Me,onBlur:z,onFocus:R,onKeyDown:M,onWheel:q,maxLength:Le,role:Ne&&"combobox","aria-label":fe||O,"aria-invalid":ce&&"error"===ce.status,"aria-owns":Ne,"aria-activedescendant":je,required:De,"data-testid":we||j(x.TEXT_FIELD,ne),tabIndex:Xe}),ze&&e("div",Object.assign({className:c("input-component__loader--container",{"input-component__loader--container-has-icon":Ge})},{children:e("div",Object.assign({className:"input-component__loader"},{children:e(d,{svgClassName:"input-component__loader-svg"})}))})),e(g,Object.assign({className:c("input-component__icon--container",{"input-component__icon--container-has-icon":Ge,"input-component__icon--container-active":Qe}),onClick:Ue,tabIndex:ue!==T&&Be&&Z.length&&Qe?"0":"-1"},{children:e(l,{icon:Z,className:c("input-component__icon"),clickable:!1,id:ne,iconLabel:xe.primary,iconType:l.type.ICON_FONT,ignoreFocusStyle:!0,iconSize:ae===I.sizes.SMALL?"16px":"18px"})})),e(g,Object.assign({className:c("input-component__icon--container",{"input-component__icon--container-has-icon":Ge,"input-component__icon--container-active":Pe}),onClick:Ue,tabIndex:Ze?"0":"-1",dataTestId:Re||j(x.TEXT_FIELD_SECONDARY_BUTTON,ne)},{children:e(l,{icon:$,className:c("input-component__icon"),clickable:!1,id:ne,iconLabel:xe.secondary,iconType:l.type.ICON_FONT,ignoreFocusStyle:!0,iconSize:ae===I.sizes.SMALL?"16px":"18px"})}))]})),Je&&n("div",Object.assign({className:"input-component__sub-text-container"},{children:[ce&&ce.text&&e("span",Object.assign({className:"input-component__sub-text-container-status","aria-label":b.VALIDATION_TEXT},{children:ce.text})),be&&e("span",Object.assign({className:"input-component__sub-text-container-counter","aria-label":b.CHAR},{children:Be&&Be.length||0}))]}))]}))}))}));Object.assign(I,{sizes:h,feedbacks:f,types:p,defaultTestId:x.TEXT_FIELD});var C=I;export{C as default};
