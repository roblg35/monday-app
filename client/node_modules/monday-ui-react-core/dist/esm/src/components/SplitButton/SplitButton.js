import{slicedToArray as o,toConsumableArray as n}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{__rest as i}from"../../../_virtual/_tslib.js";import{jsx as t,jsxs as e}from"react/jsx-runtime";import{useState as a,useRef as s,useCallback as r,useMemo as l}from"react";import c from"classnames";import{SplitButtonSecondaryContentPosition as d,ENTER_KEYS as m,EMPTY_ARR as u,DEFAULT_DIALOG_SHOW_TRIGGER as g,DEFAULT_DIALOG_HIDE_TRIGGER as p,SECONDARY_BUTTON_WRAPPER_CLASSNAME as f,DIALOG_MOVE_BY as y,SECONDARY_BUTTON_ARIA_LABEL as b}from"./SplitButtonConstants.js";import{HideShowEvent as D}from"../Dialog/consts/dialog-show-hide-event.js";import{NOOP as v}from"../../utils/function-utils.js";import{isInsideClass as h}from"../../utils/dom-utils.js";import C from"../../hooks/useKeyEvent/index.js";import j from"../../hooks/useEventListener/index.js";import k from"../Button/Button.js";import O from"../Dialog/Dialog.js";import S from"../Icon/Icons/components/DropdownChevronDown.js";import T from"../DialogContentContainer/DialogContentContainer.js";import"./SplitButton.scss.js";import{DialogPosition as N}from"../../constants/positions.js";import{AnimationType as I}from"../../constants/dialog.js";var P=function(N){var P=N.secondaryDialogContent,_=N.onSecondaryDialogDidShow,z=void 0===_?v:_,B=N.onSecondaryDialogDidHide,w=void 0===B?v:B,E=N.shouldCloseOnClickInsideDialog,x=N.zIndex,M=void 0===x?null:x,A=N.secondaryDialogClassName,L=N.secondaryDialogPosition,R=void 0===L?d.BOTTOM_START:L,H=N.dialogContainerSelector,F=N.dialogPaddingSize,K=void 0===F?T.sizes.MEDIUM:F,U=N.disabled,V=N.loading,X=N.kind,q=N.color,G=N.className,J=N.leftIcon,Q=N.rightIcon,W=N.onClick,Y=N.children,Z=N.marginLeft,$=N.marginRight,oo=N.active,no=i(N,["secondaryDialogContent","onSecondaryDialogDidShow","onSecondaryDialogDidHide","shouldCloseOnClickInsideDialog","zIndex","secondaryDialogClassName","secondaryDialogPosition","dialogContainerSelector","dialogPaddingSize","disabled","success","loading","kind","color","className","leftIcon","rightIcon","onClick","children","marginLeft","marginRight","active"]),io=a(!1),to=o(io,2),eo=to[0],ao=to[1],so=a(!1),ro=o(so,2),lo=ro[0],co=ro[1],mo=a(!1),uo=o(mo,2),go=uo[0],po=uo[1],fo=s(null),yo=r((function(){return co(!0)}),[co]),bo=r((function(){return co(!1)}),[co]),Do=r((function(o){return!U&&!h(o.target,f)}),[U]),vo=r((function(o){Do(o)&&po(!0)}),[po,Do]),ho=r((function(){return po(!1)}),[po]),Co=r((function(o){Do(o)&&po(!0)}),[po,Do]),jo=r((function(){ao(!0),z()}),[ao,z]),ko=r((function(){ao(!1),w()}),[ao,w]);j({eventName:"mouseenter",callback:yo,ref:fo}),j({eventName:"mouseleave",callback:bo,ref:fo}),j({eventName:"mousedown",callback:vo,ref:fo}),j({eventName:"mouseup",callback:ho,ref:fo}),j({eventName:"transitionend",callback:ho,ref:fo}),C({keys:m,ref:fo,callback:Co});var Oo=l((function(){return c("monday-style-split-button","monday-style-split-button--kind-".concat(X),"monday-style-split-button--color-".concat(q),{"monday-style-split-button--main-active":oo,"monday-style-split-button--active":go,"monday-style-split-button--split-content-open":eo,"monday-style-split-button--hovered":lo,"monday-style-split-button--disabled":U},G)}),[G,X,q,oo,go,eo,lo,U]),So=l((function(){return U?u:g}),[U]),To=l((function(){return E?[].concat(n(p),[D.CONTENT_CLICK]):p}),[E]),No=r((function(){var o="function"==typeof P?P():P;return t(T,Object.assign({type:T.types.POPOVER,size:K},{children:o}))}),[P,K]),Io=l((function(){return R===d.BOTTOM_MIDDLE?"":R===d.BOTTOM_START?"bottom":"top"}),[R]);return e("div",Object.assign({className:Oo,ref:fo,role:"button"},{children:[t(k,Object.assign({},no,{preventClickAnimation:!0,leftIcon:J,rightIcon:Q,rightFlat:!0,color:q,kind:X,active:oo,onClick:W,className:"monday-style-split-button__main-button",marginLeft:Z,onFocus:yo,onBlur:bo,disabled:U,loading:V},{children:Y})),t("div",Object.assign({className:f},{children:t(O,Object.assign({wrapperClassName:A,zIndex:M,content:No,position:R,containerSelector:H,startingEdge:Io,animationType:I.EXPAND,moveBy:y,onDialogDidShow:jo,onDialogDidHide:ko,showTrigger:So,hideTrigger:To},{children:t(k,Object.assign({},no,{preventClickAnimation:!0,leftFlat:!0,noSidePadding:!0,color:q,kind:X,className:"monday-style-split-button__secondary-button",active:eo,marginRight:$,onFocus:yo,onBlur:bo,disabled:U,ariaLabel:b,ariaHasPopup:!0,ariaExpanded:eo},{children:t("div",Object.assign({className:"monday-style-split-button__secondary-button-icon-wrapper"},{children:t(S,{"aria-hidden":"true"})}))}))}))}))]}))};Object.assign(P,{secondaryPositions:d,secondaryDialogPositions:d,sizes:k.sizes,colors:k.colors,kinds:k.kinds,inputTags:k.inputTags,dialogPaddingSizes:T.sizes}),P.defaultProps=Object.assign(Object.assign({},k.defaultProps),{onSecondaryDialogDidShow:v,onSecondaryDialogDidHide:v,zIndex:null,secondaryDialogClassName:"",secondaryDialogPosition:N.BOTTOM_START,dialogPaddingSize:T.sizes.MEDIUM});var _=P;export{_ as default};
