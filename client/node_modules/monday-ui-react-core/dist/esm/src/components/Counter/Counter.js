import{slicedToArray as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as n}from"react/jsx-runtime";import{useState as e,useRef as i,useCallback as t,useEffect as r,useMemo as a}from"react";import s from"classnames";import{SwitchTransition as c,CSSTransition as l}from"react-transition-group";import d from"../../hooks/useEventListener/index.js";import m from"../../hooks/useAfterFirstRender/index.js";import{NOOP as u}from"../../utils/function-utils.js";import{backwardCompatibilityForProperties as p}from"../../helpers/backwardCompatibilityForProperties.js";import{getActualSize as f,CounterSize as v,CounterColor as b,CounterType as y}from"./CounterConstants.js";import"./Counter.scss.js";var j=function v(b){var y=b.counterClassName,j=b.count,g=void 0===j?0:j,h=b.size,k=void 0===h?v.sizes.LARGE:h,L=b.kind,x=void 0===L?v.kinds.FILL:L,N=b.color,O=void 0===N?v.colors.PRIMARY:N,w=b.maxDigits,C=void 0===w?3:w,A=b.ariaLabeledBy,M=void 0===A?"":A,z=b.ariaLabel,E=void 0===z?"":z,R=b.id,D=void 0===R?"":R,F=b.prefix,P=void 0===F?"":F,B=b.onMouseDown,I=void 0===B?u:B,_=b.noAnimation,G=void 0!==_&&_,H=p([b.className,b.wrapperClassName],void 0),T=e(!1),Y=o(T,2),q=Y[0],J=Y[1],K=i(null),Q=t((function(){J(!0)}),[J]),S=t((function(){J(!1)}),[J]);d({eventName:"animationend",callback:S,ref:K});var U=m();r((function(){U.current||Q()}),[g,U,Q]),r((function(){C>0||console.error("Max digits must be a positive number")}),[C]);var V=a((function(){return s("monday-style-counter","monday-style-counter--size-".concat(f(k)),"monday-style-counter--kind-".concat(x),"monday-style-counter--color-".concat(O),{"monday-style-counter--with-animation":q},y)}),[k,x,O,q,y]),W=(null==g?void 0:(""+g).length)>C?"".concat(Math.pow(10,C)-1,"+"):g+"",X=n("span",Object.assign({id:"counter-".concat(D)},{children:P+W}));return n("span",Object.assign({className:H,"aria-label":"".concat(E," ").concat(W),"aria-labelledby":M,onMouseDown:I},{children:n("div",Object.assign({className:V,"aria-label":W,ref:K},{children:G?X:n(c,Object.assign({mode:"out-in"},{children:n(l,Object.assign({classNames:"monday-style-counter--fade",addEndListener:function(o,n){o.addEventListener("transitionend",n,!1)}},{children:n("span",Object.assign({id:"counter-".concat(D)},{children:P+W}))}),W)}))}))}))};Object.assign(j,{sizes:v,colors:b,kinds:y});var g=j;export{g as default};
