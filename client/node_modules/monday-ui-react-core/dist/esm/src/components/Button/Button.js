import{slicedToArray as t,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as e,jsxs as n}from"react/jsx-runtime";import{forwardRef as i,useRef as a,useState as s,useMemo as r,useEffect as l,useCallback as c}from"react";import u from"classnames";import d from"../../hooks/useResizeObserver.js";import m from"../../hooks/useMergeRefs.js";import{NOOP as y}from"../../utils/function-utils.js";import f from"../Icon/Icon.js";import p from"../Loader/Loader.js";import{ButtonColor as b,ButtonType as v,getActualSize as g,BUTTON_ICON_SIZE as h,ButtonInputType as I}from"./ButtonConstants.js";import{getParentBackgroundColorNotTransparent as T,TRANSPARENT_COLOR as O}from"./helper/dom-helpers.js";import{getTestId as j}from"../../tests/testIds.js";import{isIE11 as k}from"../../utils/user-agent-utils.js";import{ComponentDefaultTestId as N}from"../../tests/constants.js";import"./Button.scss.js";import{SIZES as C}from"../../constants/sizes.js";var x,P,F,M,z=k()?32:6,R=i((function(i,y){var I=i.className,O=i.children,k=i.kind,C=i.onClick,x=i.name,P=i.size,F=i.color,M=i.disabled,R=i.rightIcon,B=i.leftIcon,S=i.success,L=i.successText,_=i.successIcon,A=i.style,U=i.loading,D=i.active,w=i.id,E=i.marginRight,Y=i.marginLeft,H=i.type,V=i.onMouseDown,q=i.ariaLabel,G=i.rightFlat,J=i.leftFlat,K=i.preventClickAnimation,Q=i.noSidePadding,W=i.onFocus,X=i.onBlur,Z=i.ariaLabeledBy,$=i.defaultTextColorOnPrimaryColor,tt=i.ariaHasPopup,ot=i.ariaExpanded,et=i.ariaControls,nt=i.blurOnMouseUp,it=i.dataTestId,at=i.insetFocus,st=i.tabIndex,rt=a(null),lt=s(!1),ct=t(lt,2),ut=ct[0],dt=ct[1],mt=r((function(){return function(t){var o=t.borderBoxSize,e=o.blockSize,n=Math.max(o.inlineSize,z),i=Math.max(e,z);rt.current&&(rt.current.style.setProperty("--element-width","".concat(n,"px")),rt.current.style.setProperty("--element-height","".concat(i,"px")),dt(!0))}}),[rt]);d({ref:rt,callback:mt,debounceTime:200}),l((function(){if(F===b.ON_PRIMARY_COLOR&&k===v.PRIMARY&&rt.current){var t=rt.current;t.style.color=T(t,$)}}),[k,rt,F,$]);var yt=c((function(){var t=rt.current;!M&&t&&nt&&t.blur()}),[M,rt,nt]),ft=c((function(t){M||U||S?t.preventDefault():C&&C(t)}),[C,M,U,S]),pt=c((function(t){M||U||S?t.preventDefault():V&&V(t)}),[V,M,U,S]),bt=r((function(){var t,e=S?b.POSITIVE:F;return u(I,"monday-style-button","monday-style-button--size-".concat(g(P)),"monday-style-button--kind-".concat(k),"monday-style-button--color-".concat(e),(o(t={"has-style-size":ut,"monday-style-button--loading":U},"monday-style-button--color-".concat(e,"-active"),D),o(t,"monday-style-button--margin-right",E),o(t,"monday-style-button--margin-left",Y),o(t,"monday-style-button--right-flat",G),o(t,"monday-style-button--left-flat",J),o(t,"monday-style-button--prevent-click-animation",K),o(t,"monday-style-button--no-side-padding",Q),o(t,"monday-style-button--disabled",M),o(t,"inset-focus-style",at),t))}),[S,F,I,P,k,ut,U,D,E,Y,G,J,K,Q,M,at]),vt=m({refs:[y,rt]}),gt=r((function(){return{ref:vt,type:H,className:bt,name:x,onMouseUp:yt,style:A,onClick:ft,id:w,onFocus:W,onBlur:X,tabIndex:st,"data-testid":it||j(N.BUTTON,w),onMouseDown:pt,"aria-disabled":M,"aria-busy":U,"aria-labelledby":Z,"aria-label":q,"aria-haspopup":tt,"aria-expanded":ot,"aria-controls":et,"aria-pressed":D}}),[vt,H,bt,x,yt,A,ft,w,W,X,st,it,pt,M,U,Z,q,tt,ot,et,D]),ht=r((function(){if("function"==typeof B)return h}),[B]),It=r((function(){if("function"==typeof R)return h}),[R]),Tt=r((function(){if("function"==typeof _)return h}),[_]);return U?e("button",Object.assign({},gt,{children:e("span",Object.assign({className:"monday-style-button__loader"},{children:e(p,{svgClassName:"monday-style-button-loader-svg"})}))})):n("button",Object.assign({},gt,S?{children:[_?e(f,{iconType:null==f?void 0:f.type.ICON_FONT,clickable:!1,icon:_,iconSize:Tt,className:u({"monday-style-button--left-icon":!!L}),ignoreFocusStyle:!0}):null,L]}:{children:[B?e(f,{iconType:null==f?void 0:f.type.ICON_FONT,clickable:!1,icon:B,iconSize:ht,className:u({"monday-style-button--left-icon":!!O}),ignoreFocusStyle:!0}):null,O,R?e(f,{iconType:null==f?void 0:f.type.ICON_FONT,clickable:!1,icon:R,iconSize:It,className:u({"monday-style-button--right-icon":!!O}),ignoreFocusStyle:!0}):null]}))}));Object.assign(R,{sizes:C,colors:b,kinds:v,types:I,inputTags:I,defaultTestId:N.BUTTON}),R.defaultProps={className:void 0,name:void 0,style:void 0,id:void 0,dataTestId:void 0,kind:null===(x=R.kinds)||void 0===x?void 0:x.PRIMARY,onClick:y,size:null===(P=R.sizes)||void 0===P?void 0:P.MEDIUM,color:null===(F=R.colors)||void 0===F?void 0:F.PRIMARY,disabled:!1,rightIcon:null,leftIcon:null,success:!1,successText:"",successIcon:null,loading:!1,active:!1,marginRight:!1,marginLeft:!1,type:null===(M=R.types)||void 0===M?void 0:M.BUTTON,onMouseDown:y,rightFlat:!1,leftFlat:!1,preventClickAnimation:!1,noSidePadding:!1,onFocus:y,onBlur:y,defaultTextColorOnPrimaryColor:O,ariaHasPopup:void 0,blurOnMouseUp:!0,ariaExpanded:void 0,ariaControls:void 0,ariaLabel:void 0,ariaLabeledBy:void 0,insetFocus:!1};var B=R;export{B as default};
